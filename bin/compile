#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>

echo "-----> Installing CMake 3.11.0"

# change to the the BUILD_DIR ($1)
cd $1

# download the mruby binary (-O) silently (-s)
curl https://cmake.org/files/v3.11/cmake-3.11.0.tar.gz -s -O

# make a directory to untar (like unzip) the binary
mkdir -p vendor/cmake

# untar the binary to the directory we want
tar -C vendor/ -xvf cmake-3.11.0.tar.gz

mkdir -p $build/.profile.d
echo 'PATH=$PATH:$HOME/vendor/cmake/bin' > $build/.profile.d/go.sh
